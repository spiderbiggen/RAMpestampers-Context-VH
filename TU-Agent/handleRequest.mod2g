use agentKnowledge as knowledge.
use tygron as actionspec.

order=linear.

module handleRequest {
			
	% Accept a request to buy land if the indicator goal of building high buildings has been satisfied
		then popup_answer(PopupID, 0) + insert(requestAnswered('BUY_LAND', PopupID)).
		
	% Decline a request to buy land if there is a plan to build on that land
	if bel(requests(X), member(request(_, 'BUY_LAND', PopupID, _, _, _, Price, _, _, _), X), isNumber(Price), not(requestAnswered('BUY_LAND', PopupID)))
		then popup_answer(PopupID, 1) + insert(requestAnswered('BUY_LAND', PopupID)).
		
	% Answer all confirmation popups with yes (PopupID = 0) since that is the only option
	if bel(requests(X), member(request(_, Category, PopupID, _, _, _, _, _, _, _), X), not(requestAnswered(Category, PopupID)))
		then popup_answer(PopupID, 0) + insert(requestAnswered(Category, PopupID)).
		
	if bel(requests(X), empty(X))
		then exit-module.
}